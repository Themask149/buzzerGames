<%- include('../partials/header',{root:"../../"}); %>
    <title>Conquiztador - Host</title>
    <link rel="stylesheet" type="text/css" href="/css/conquiztador.css">
    </head>

    <body>
        <%- include('../partials/navbarlow'); %>

            <h1 class="text-center display-4">Game Code: <%= code %>
            </h1>

            <!-- Pseudo -->
            <div class="row">

                <div class="card col-4 mx-auto" id="user-card">
                    <div class="card-body">
                        <form action="/" method="post" id="form-pseudo">
                            <div class="col-xs-4">
                                <input type="hidden" name="code" id="code" value=<%=code %>>
                                <label for="username" class="form-label ">Pseudo</label>
                                <input type="text" name="username" id="username" class="form-control" minlength="2"
                                    maxlength="20" placeholder="Saisir votre pseudo" pattern="[a-zA-Z0-9\s]+" required>
                                <label for="listeQuestions" class="form-label ">Mettez ici la liste des 9 questions de
                                    la manche 1, sous ce format :
                                    Thème1€Q1;R1$Q2;R2$Q3;R3€Thème2€Q1;R1$Q2;R2$Q3;R3€Thème3€Q1;R1$Q2;R2$Q3;R3 </label>
                                <input type="text" class="form-control" name="listeQuestions" id="listeQuestions"
                                    placeholder="Saisir vos questions" required>
                            </div>
                            <button class="btn btn-primary" id="start" type="submit">Rejoindre la partie</button>
                        </form>
                    </div>
                </div>
            </div>

            <!--Options -->
            <div class="text-center">
                <button type="button" class="btn btn-secondary btn-lg mx-auto" style="display: none;"
                    id="settings-button">Options</button>
            </div>
            <div class="row text-center border-top border-bottom mx-auto my-2" id="settings" style="display: none;">
                <h1 class="mx-auto my-2">Options</h1>

                <div class="row mx-auto my-2">
                    <div class="col-1"><input class="form-check-input" type="checkbox" name="whitelist"
                            id="conquiz-whitelistCheckbox"></div>
                    <div class="col-4"><label class="form-check-label " for="conquiz-whitelistCheckbox">
                            Whitelist (Séparer les noms des joueurs par des points virgules)
                        </label>
                    </div>
                    <div class="col-4"><input type="text" name="whitelist-text" id="conquiz-whitelist"
                            class="form-control col-4" minlength="0" placeholder="Whitelist"></div>
                    <div class="col-3"><button type="button" class="btn btn-primary"
                            id="conquiz-whitelist-button">Valider</button></div>

                </div>
            </div>

            <!-- App -->

            <div class="row" id="app-div-manche1" style="display: none;">

                <!-- Joueur 1-->
                <div class="col-3">
                    <div class="mx-auto text-center pt-5 joueur1-div" style="text-align:center;">
                        <div class="card mx-auto col-8">
                            <div class="card-header">
                                <h3 class="joueur1-name">Joueur 1</h3>
                            </div>
                            <div class="card-body joueur1-score-div">

                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-6 mx-auto my-auto">
                    <div class="container">
                        <div class="row">
                            <h3 class="col-4 mx-auto text-center" id="theme1">Thème 1</h3>
                            <h3 class="col-4 mx-auto text-center" id="theme2">Thème 2</h3>
                            <h3 class="col-4 mx-auto text-center" id="theme3">Thème 3</h3>
                        </div>
                        <div class="row">
                            <div class="col-4 block" id="block-3" data-case="3">3 cases</div>
                            <div class="col-4 block" id="block-6" data-case="6">3 cases</div>
                            <div class="col-4 block" id="block-9" data-case="9">3 cases</div>
                        </div>
                        <div class="row">
                            <div class="col-4 block" id="block-2" data-case="2">2 cases</div>
                            <div class="col-4 block" id="block-5" data-case="5">2 cases</div>
                            <div class="col-4 block" id="block-8" data-case="8">2 cases</div>
                        </div>
                        <div class="row">
                            <div class="col-4 block" id="block-1" data-case="1">1 case</div>
                            <div class="col-4 block" id="block-4" data-case="4">1 case</div>
                            <div class="col-4 block" id="block-7" data-case="7">1 case</div>
                        </div>
                    </div>

                </div>

                <!-- Joueur 2-->
                <div class="col-3">
                    <div class="mx-auto text-center pt-5 joueur2-div" style="text-align:center;">
                        <div class="card mx-auto col-8">
                            <div class="card-header">
                                <h3 class="joueur2-name">Joueur 2</h3>
                            </div>
                            <div class="card-body joueur2-score-div">

                            </div>
                        </div>
                    </div>

                </div>

                <!-- Commandes  -->
                <div class="row">
                    <div id="buttons" class="mx-auto my-2 text-center border-right col-6"
                        style=" border-right: 1px solid #ccc;">
                        <h2>Commandes</h2>
                        <button type="button" class="btn btn-danger" id="Start-Manche2">Manche 2</button>
                    </div>
                    <div class="mx-auto text-center col-6 pt-5 spectateurs-div" style="text-align:center;">
                        <div class="card mx-auto">
                            <div class="card-header">
                                Liste des spectateurs
                            </div>
                            <div class="card-body">
                                <ul class="list-group" id="spectateurs-list">

                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Manche 2 -->

            <div class="row" id="app-div-manche2" style="display: none;">

                <!-- Joueur 1-->
                <div class="col-3">
                    <div class="mx-auto text-center pt-5 joueur1-div" style="text-align:center;">
                        <div class="card mx-auto col-8 joueur1-card">
                            <div class="card-header">
                                <h3 class="joueur1-name">Joueur 1</h3>
                            </div>
                            <div class="card-body joueur1-score-div">

                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-6">
                    <svg height="100%" width="100%" class="m-auto" id="buzzer">
                        <circle cx="50%" cy="50%" r="5em" stroke="black" stroke-width="3" fill="yellow"
                            id="buzzer-circle" />
                        <text x="50%" y="50%" text-anchor="middle" class="fs-1" id="buzzer-state">Bloqué</text>
                    </svg>

                </div>

                <!-- Joueur 2-->
                <div class="col-3">
                    <div class="mx-auto text-center pt-5 joueur2-div" style="text-align:center;">
                        <div class="card mx-auto col-8 joueur2-card">
                            <div class="card-header">
                                <h3 class="joueur2-name">Joueur 2</h3>
                            </div>
                            <div class="card-body joueur2-score-div">

                            </div>
                        </div>
                    </div>

                </div>

                <div class="row py-2" id="turf">
                    <?xml version="1.0" encoding="utf-8"?>
                    <svg viewBox="0 0 800 50" xmlns="http://www.w3.org/2000/svg">
                        <linearGradient id="grad-interieur" x1="100%" y1="0%" x2="0%" y2="0%">
                            <stop offset="30%" id="grad-interieur-orange" style="stop-color: orange; stop-opacity: 1"></stop>
                            <stop offset="30%" id="grad-interieur-white-2" style="stop-color: rgb(255, 255, 255);; stop-opacity: 1"></stop>
                            <stop offset="70%" id="grad-interieur-white-1" style="stop-color: rgb(255, 255, 255);; stop-opacity: 1"></stop>
                            <stop offset="0%" id="grad-interieur-blue" style="stop-color: rgb(22, 45, 148);; stop-opacity: 1"></stop>
                        </linearGradient>
                        <rect x="0" y="0" width="800" height="40" style="stroke: rgb(0, 0, 0); fill: url(#grad-interieur);"
                            transform="matrix(1, 0, 0, 1, 7.105427357601002e-15, 0)" />
                        <line style="stroke: black; transform-origin: 44.44px 20px;" x1="44.44" y1="40" x2="44.44"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 528.103px 250px;" x1="88.88" y1="40" x2="88.88"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 265.808px 207.26px;" x1="133" y1="40" x2="133"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 265.808px 207.26px;" x1="177" y1="40" x2="177"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 267.564px 206.674px;" x1="221" y1="40" x2="221"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 267.564px 206.674px;" x1="266" y1="40" x2="266"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 267.564px 206.674px;" x1="310" y1="40" x2="310"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 267.564px 206.674px;" x1="354" y1="40" x2="354"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 265.223px 206.674px;" x1="399" y1="40" x2="399"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 188.895px 528.594px;" y1="40" x2="443" y2="0"
                            x1="443" />
                        <line style="stroke: black; transform-origin: 198.263px 522.154px;" x1="487" y1="40" x2="487"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 201.19px 525.082px;" x1="532" y1="40" x2="532"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 201.19px 525.667px;" x1="576" y1="40" x2="576"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 202.947px 526.252px;" x1="620" y1="40" x2="620"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 202.947px 526.838px;" x1="665" y1="40" x2="665"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 204.703px 526.838px;" x1="709" y1="40" x2="709"
                            y2="0" />
                        <line style="stroke: black; transform-origin: 205.874px 526.838px;" x1="753" y1="40" x2="753"
                            y2="0" />
                    </svg>
                </div>

                <!-- Commandes  -->
                <div class="row">
                    <div id="buttons-manche2" class="mx-auto my-2 text-center border-right col-6"
                        style=" border-right: 1px solid #ccc;">
                        <h2>Commandes</h2>
                        <button type="button" class="btn btn-warning" id="bloquer">Bloquer (B)</button>
                        <button type="button" class="btn btn-success" id="liberer">Libérer (L)</button>
                        <button type="button" class="btn btn-danger" id="Start-Manche1">Manche 1</button>
                        <div id="validate-answer" style="display: none;">
                            <button type="button" class="btn btn-danger" id="Faux-manche2">Faux (F ou suppr)</button>
                            <button type="button" class="btn btn-success" id="Vrai-manche2">Vrai (V ou espace)</button>
                        </div>
                    </div>
                    <div class="mx-auto text-center col-6 pt-5 spectateurs-div " style="text-align:center;">
                        <div class="card mx-auto">
                            <div class="card-header">
                                Liste des spectateurs
                            </div>
                            <div class="card-body">
                                <ul class="list-group spectateurs-list">

                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>


            <div class="alert alert-success mt-5" style="display: none;" id="success-alert">

            </div>

            <!-- Validate points -->
            <div class="modal fade" id="modalGivePoints" data-bs-backdrop="static" data-bs-keyboard="false"
                tabindex="-1" aria-labelledby="pseudo-modal" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title " id="pseudo-modal">Valider la réponse</h5>
                        </div>
                        <div class="modal-body">
                            <label for="score" class="form-label" id="modal-score-label">Donnez des points pour la
                                réponse :</label>
                            <input type="number" name="score" id="score-input" class="form-control"
                                placeholder="Nombre de points" pattern="[0-9\s]+" required>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="btn-validate"
                                data-bs-dismiss="modal">Valider</button>
                        </div>
                    </div>
                </div>

            </div>

            <div class="modal fade" id="modal-question" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-labelledby="question-modal" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title" id="question-modal">Voici la question</h2>
                        </div>
                        <div class="modal-body">
                            <h3 id="question-div"></h3>
                            <h4 id="reponse-div"></h4>
                        </div>
                        <div class="modal-footer" id="questions-buttons">
                            <button type="button" class="btn btn-warning" data-bs-dismiss="modal" id="Faux-manche1">Faux
                                (F ou suppr)</button>
                            <button type="button" class="btn btn-success" data-bs-dismiss="modal" id="Vrai-manche1">Vrai
                                (V ou espace)</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="modal-manche2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-labelledby="manche2-modal" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title" id="manche2-modal">Attention ! </h2>
                        </div>
                        <div class="modal-body">
                            <h3>La manche 2 se lancera quand vous cliquerez sur le bouton "Lancer" ci-dessous. N'oubliez pas de:</h3>
                            <ul>
                                <li>
                                    - expliquer les règles.
                                </li>
                                <li>
                                    - s'assurer que tout le monde a bien compris.
                                </li>
                                <li>
                                    - Avoir correctement rempli les options
                                </li>
                            </ul>
                        </div>
                        <div class="modal-footer" id="manche2-options">
                            <div class="row">
                                <div class="col-2"><label class="form-check-label " for="conquiz-pointmax-text">
                                        Point max par question
                                    </label>
                                </div>
                                <div class="col-2"><input type="number" name="conquiz-pointmax-text" id="conquiz-pointmax"
                                        class="form-control col-2" minlength="0" placeholder="Point max" value="6"></div>
                                <div class="col-2"><label class="form-check-label " for="conquiz-rate-text">
                                        Nb de seconde pour monter de 1 point
                                </label>
                                </div>
                                <div class="col-2"><input type="number" name="conquiz-rate-text" id="conquiz-rate"
                                            class="form-control col-2" minlength="0" placeholder="rate" value="30"></div>
                                <div class="col-3"><button type="button" class="btn btn-primary"
                                        id="conquiz-manche2-button">Lancer</button></div>
            
                        </div>
                    </div>
                </div>
            </div>






            <%- include('../partials/script'); %>
                <script src="/js/conquiztadorhost.js"></script>
    </body>